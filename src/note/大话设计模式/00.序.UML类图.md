# UML 类图

在系统学习设计模式之前，有必要首先了解 UML 类图，这样才能更方便直观的理解各个类的组成及关系，以下是对 UML 类图的简单介绍

## 基本元素

```plantuml
@startuml
class 类 {
  类型 属性名称
  {static} 类型 静态属性
  返回值 方法名称()
}

note right of 类::静态属性
  下划线表示静态
end note

abstract 抽象类 {
  {abstract} 返回值 抽象方法()
}

note right: 斜体表示抽象

interface 接口 <<interface>> {
  返回值 方法名称()
}
@enduml
```

- **类:** 矩形框内分为名称、属性、方法三部分，使用横线分隔
- **接口:** 在名称顶部标注 `<<interface>>`（由于名称旁已标明类型，后续将省略）
- **静态属性 / 静态方法:** 使用下划线表示
- **抽象类 / 抽象方法:** 使用斜体表示

## 可访问性

```plantuml
@startuml
class 类 {
  +属性A
  ~属性B
  #属性C
  -属性D
  +方法A()
  ~方法B()
  #方法C()
  -方法D()
}
@enduml
```

类中的访问控制修饰符，通常在 UML 类图中使用符号 `+`、`~`、`#`、`-` 表示，但在本站中使用图标表示，属性为空心、方法为实心，具体对应关系如下：

| 符号  |                   图标                    |    修饰符    |
|:---:|:---------------------------------------:|:---------:|
| `+` | <span style="color: #84BE84"> ● </span> |  public   |
| `~` | <span style="color: #4177AF"> ▲ </span> |  default  |
| `#` | <span style="color: #FFCC44"> ◆ </span> | protected |
| `-` | <span style="color: #F24D5C"> ■ </span> |  private  |

## 关联关系

```plantuml
@startuml
abstract class 抽象类 {}

interface 接口 {}

class 整体 {
  +部分 实例
}

class 集合 {
  +集合<个体> 实例
}

class 依赖者 {
  +方法(被依赖 实例)
}

class 关联者 {
  +被关联 实例
}

class 双向类A {
  +双向类B 实例
}

class 双向类B {
  +双向类A 实例
}

抽象类 <|-- 继承类 : 继承
接口 <|.. 实现类 : 实现
整体 *--> 部分 : 组合
集合 o--> 个体 : 聚合
依赖者 ..> 被依赖 : 依赖
关联者 --> 被关联 : 关联
双向类A -- 双向类B : 双向关联
@enduml
```

- **继承:** 子类继承了父类的行为结构，即 `extends`
- **实现:** 类实现了某个接口，即 `implements`
- **组合:** 强关联关系，二者不能独立存在，生命周期相同（如公司由多个部门组合而成）
- **聚合:** 弱关联关系，个体可以脱离集合而存在（如森林由多个树木聚合而成）
- **依赖:** 通常在方法中体现依赖关系
    1. **参数依赖:** 类 A 的某个方法接受类 B 的实例作为参数
    2. **局部变量依赖:** 类 A 的某个方法内部创建或使用了类 B 的实例
    3. **返回值依赖:** 类 A 的某个方法返回类 B 的实例
- **关联:** 通常在属性中体现关联关系，知晓对方且可独立存在
- **双向关联:** 同上，只是双方都与对方有关联关系

::: details 实现接口的另一种表现形式

**棒棒糖表示法:** 圆圈旁为接口名称，因形似棒棒糖而得名

```plantuml
@startuml
class 实现类
实现类 -() 接口
@enduml
```

:::
